import{r as n,_ as pe,R as o,f as J,P as t,g as B,y as h,j as s}from"./index-Cl9t3paX.js";import{Q as ze,$ as ft,a2 as pt,K as Fe}from"./ProBadge-CEyu80eQ.js";import"./index.es-D1eT4QqP.js";import{C as fe,a as M}from"./CRow-Cly1JCDc.js";import{C as Ve,a as Pe}from"./CCardBody-GLKyMN3u.js";import{C as qe}from"./CCardHeader-Drmq2VlB.js";import{C as Be}from"./CFormControlWrapper-DKXHSdJu.js";import{C as mt}from"./CElementCover-tHWIPxlo.js";import"./cil-user-Dlmw-Gem.js";import"./CFormControlValidation-CRCj-caL.js";var Je=function(e){return e&&e.map(function(a,l){return a.options?o.createElement("optgroup",{label:a.label,key:l},Je(a.options)):o.createElement("option",{value:a.value,key:l,disabled:a.disabled},a.label)})},me=n.forwardRef(function(e,a){var l=e.id,i=e.options,c=pe(e,["id","options"]);return o.createElement("select",J({className:"multi-select-new"},l&&{id:"".concat(l,"-multi-select")},l&&{name:"".concat(l,"-multi-select")},{tabIndex:-1,style:{display:"none"}},c,{ref:a}),i&&Je(i))});me.propTypes={options:t.array,value:t.oneOfType([t.number,t.string,t.arrayOf(t.string.isRequired)])};me.displayName="CMultiSelectNativeSelect";var de=n.forwardRef(function(e,a){var l=e.children,i=e.className,c=e.visibleItems,p=e.onScroll,u=n.useRef(null),b=n.useRef(null),d=ze(a,u),v=n.useState(Math.floor(c/2)),S=v[0],x=v[1],C=n.useState(1),E=C[0],N=C[1],L=n.useState(0),f=L[0],g=L[1],T=n.useState(o.Children.count(l)),y=T[0],V=T[1],q=n.useState(0),j=q[0],Y=q[1],Q=n.useState(c*f+2*j),W=Q[0],le=Q[1],$=n.useState(y*f+2*j),re=$[0],X=$[1];n.useEffect(function(){u.current&&u.current.scrollTop,u.current&&Y(Number.parseFloat(getComputedStyle(u.current).paddingTop))}),n.useEffect(function(){V(o.Children.count(l))},[l]),n.useEffect(function(){le(Math.min(c,y)*f+2*j)},[f,y,j,c]),n.useEffect(function(){X(y*f),u.current&&u.current.scrollTop},[f,y]),n.useEffect(function(){x(Math.floor(c/2))},[c]);var Z=function(H){var O=f&&Math.max(Math.ceil(H/f),1);N(O),p&&p(O)};return o.createElement("div",{className:B("virtual-scroller",i),onScroll:function(H){return Z(H.target.scrollTop)},ref:d,style:{height:W,overflowY:"auto"}},o.createElement("div",{className:"virtual-scroller-content",style:{height:re},ref:b},o.Children.map(l,function(H,O){if(o.isValidElement(H)&&O+1>Math.max(E-S,0)&&O+1<=E+c+S)return o.cloneElement(H,{className:B(H.props.className,{"virtual-scroller-item-preload":O+1>E+c||O+1<E}),key:O,style:J({},E>S&&{transform:"translateY(".concat((E-S)*f,"px)")}),ref:function(A){return A&&A.offsetHeight&&g(A.offsetHeight+Number.parseFloat(getComputedStyle(A).marginTop)+Number.parseFloat(getComputedStyle(A).marginBottom))}})})))});de.propTypes={onScroll:t.func,visibleItems:t.number.isRequired};de.displayName="CVirtualScroller";var dt=function(e,a){for(var l=e.toLowerCase().replace(/\s/g,"-"),i=l,c=1;a.some(function(p){return String(p.value)===i});)i="".concat(l,"-").concat(c),c++;return[{value:i,label:e,custom:!0}]},Ge=function(e,a){if(e.length>0&&a){for(var l=[],i=0,c=a;i<c.length;i++){var p=c[i],u=p.options&&p.options.filter(function(b){return b.label&&b.label.toLowerCase().includes(e.toLowerCase())});(p.label&&p.label.toLowerCase().includes(e.toLowerCase())||u&&u.length>0)&&l.push(Object.assign({},p,u&&u.length>0&&{options:u}))}return l}return a},Ue=function(e,a){for(var l=[],i=0,c=e;i<c.length;i++){var p=c[i];if(Array.isArray(p.options)){var u=p.options,b=pe(p,["options"]);a&&l.push(b),l.push.apply(l,u)}else l.push(p)}return l},vt=function(e,a){var l=e.nextElementSibling;if(!a)return l;for(;l;){if(l.matches(a))return l;l=l.nextElementSibling}},ht=function(e,a){var l=e.previousElementSibling;if(!a)return l;for(;l;){if(l.matches(a))return l;l=l.previousElementSibling}},Ke=function(e,a,l){var i=h(h([],a,!0),e,!0);l&&(i=i.filter(function(v){return!l.some(function(S){return S.value===v.value})}));for(var c=[],p=function(v){c.some(function(S){return S.value===v.value})||c.push(v)},u=0,b=i;u<b.length;u++){var d=b[u];p(d)}return c},ve=n.forwardRef(function(e,a){var l=e.handleOptionOnClick,i=e.loading,c=e.options,p=e.optionsMaxHeight,u=e.optionsStyle,b=e.optionsTemplate,d=e.optionsGroupsTemplate,v=e.searchNoResultsLabel,S=e.selected,x=e.virtualScroller,C=e.visibleItems,E=C===void 0?10:C,N=function(f,g){if((f.code==="Space"||f.key==="Enter")&&(f.preventDefault(),l&&l(g)),f.key==="Down"||f.key==="ArrowDown"){f.preventDefault();var T=f.target,y=vt(T,".form-multi-select-option");y&&y.focus()}if(f.key==="Up"||f.key==="ArrowUp"){f.preventDefault();var T=f.target,V=ht(T,".form-multi-select-option");V&&V.focus()}},L=function(f){return f.length>0?f.map(function(g,T){return"value"in g?o.createElement("div",{className:B("form-multi-select-option",{"form-multi-select-option-with-checkbox":u==="checkbox","form-multi-selected":S.some(function(y){return y.value===g.value}),disabled:g.disabled}),key:T,onClick:function(){return l&&l(g)},onKeyDown:function(y){return N(y,g)},tabIndex:0},b?b(g):g.label):o.createElement("div",{className:"form-multi-select-optgroup-label",key:T},d?d(g):g.label)}):o.createElement("div",{className:"form-multi-select-options-empty"},v)};return o.createElement(o.Fragment,null,x?o.createElement(de,{className:"form-multi-select-options",visibleItems:E,ref:a},L(c)):o.createElement("div",J({className:"form-multi-select-options"},p!=="auto"&&{style:{maxHeight:p,overflow:"scroll"}},{ref:a}),L(c)),i&&o.createElement(mt,null))});ve.propTypes={handleOptionOnClick:t.func,loading:t.bool,options:t.array.isRequired,optionsMaxHeight:t.oneOfType([t.number,t.string]),optionsStyle:t.oneOf(["checkbox","text"]),optionsTemplate:t.func,optionsGroupsTemplate:t.func,searchNoResultsLabel:t.oneOfType([t.string,t.node]),virtualScroller:t.bool,visibleItems:t.number};ve.displayName="CMultiSelectOptions";var he=n.forwardRef(function(e,a){var l=e.children,i=e.multiple,c=e.placeholder,p=e.onRemove,u=e.search,b=e.selected,d=b===void 0?[]:b,v=e.selectionType,S=e.selectionTypeCounterText;return o.createElement("span",{className:B("form-multi-select-selection",{"form-multi-select-selection-tags":i&&v==="tags"}),ref:a},i&&v==="counter"&&!u&&d.length===0&&c,i&&v==="counter"&&!u&&d.length>0&&"".concat(d.length," ").concat(S),i&&v==="tags"&&d.map(function(x,C){if(v==="tags")return o.createElement("span",{className:"form-multi-select-tag",key:C},x.label,!x.disabled&&o.createElement("button",{className:"form-multi-select-tag-delete","aria-label":"Close",onClick:function(){return p&&p(x)}}))}),i&&v==="text"&&d.map(function(x,C){return o.createElement("span",{key:C},x.label,C===d.length-1?"":",","Â ")}),!i&&!u&&d.map(function(x){return x.label})[0],l)});he.propTypes={multiple:t.bool,onRemove:t.func,placeholder:t.string,search:t.oneOfType([t.bool,t.oneOf(["external"])]),selected:t.array,selectionType:t.oneOf(["counter","tags","text"]),selectionTypeCounterText:t.string};he.displayName="CMultiSelectSelection";var I=n.forwardRef(function(e,a){var l,i=e.allowCreateOptions,c=e.className,p=e.cleaner,u=p===void 0?!0:p,b=e.clearSearchOnSelect,d=e.disabled,v=e.feedback,S=e.feedbackInvalid,x=e.feedbackValid,C=e.loading,E=e.multiple,N=E===void 0?!0:E,L=e.id,f=e.invalid,g=e.label,T=e.onChange,y=e.onFilterChange,V=e.onHide,q=e.onShow,j=e.options,Y=e.optionsMaxHeight,Q=Y===void 0?"auto":Y,W=e.optionsStyle,le=W===void 0?"checkbox":W,$=e.optionsTemplate,re=e.optionsGroupsTemplate,X=e.placeholder,Z=X===void 0?"Select...":X,H=e.required,O=e.search,A=O===void 0?!0:O,be=e.searchNoResultsLabel,Ye=be===void 0?"No results found":be,ge=e.selectAll,Qe=ge===void 0?!0:ge,ye=e.selectAllLabel,We=ye===void 0?"Select all options":ye,Se=e.selectionType,ne=Se===void 0?"tags":Se,xe=e.selectionTypeCounterText,Ce=xe===void 0?"item(s) selected":xe,Te=e.size,$e=e.text,Xe=e.tooltipFeedback,ke=e.valid,Ze=e.virtualScroller,we=e.visible,_e=we===void 0?!1:we,Ee=e.visibleItems,et=Ee===void 0?10:Ee,tt=pe(e,["allowCreateOptions","className","cleaner","clearSearchOnSelect","disabled","feedback","feedbackInvalid","feedbackValid","loading","multiple","id","invalid","label","onChange","onFilterChange","onHide","onShow","options","optionsMaxHeight","optionsStyle","optionsTemplate","optionsGroupsTemplate","placeholder","required","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","size","text","tooltipFeedback","valid","virtualScroller","visible","visibleItems"]),_=n.useRef(null),lt=ze(a,_),oe=n.useRef(null),ae=n.useRef(null),ie=n.useRef(null),R=n.useRef(null),se=n.useRef(!0),ce=ft(),Ne=ce.popper,rt=ce.initPopper,nt=ce.destroyPopper,Oe=n.useState(j),ue=Oe[0],ot=Oe[1],Re=n.useState(_e),G=Re[0],U=Re[1],je=n.useState(""),k=je[0],ee=je[1],Me=n.useState([]),m=Me[0],D=Me[1],Ie=n.useState([]),P=Ie[0],Le=Ie[1],K=n.useMemo(function(){return Ue(A==="external"?h(h([],ue,!0),Ge(k,P),!0):Ge(k,h(h([],ue,!0),P,!0)),!0)},[ue,k,P]),te=n.useMemo(function(){return Ue(j)},[JSON.stringify(j)]),z=n.useMemo(function(){return i&&K.some(function(r){return r.label&&r.label.toLowerCase()===k.toLowerCase()})?!1:R.current&&dt(String(k),te)},[K,k]),at={placement:pt(_.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]};n.useEffect(function(){ot(j);var r=te.filter(function(F){return F.selected===!0}),w=te.filter(function(F){return F.selected===!1});r&&D(Ke(r,m,w))},[JSON.stringify(j)]),n.useEffect(function(){!se.current&&y&&y(k)},[k]),n.useEffect(function(){!se.current&&ae.current&&ae.current.dispatchEvent(new Event("change",{bubbles:!0})),Ne&&Ne.update()},[JSON.stringify(m)]),n.useEffect(function(){return G&&(q&&q(),window.addEventListener("mouseup",Ae),window.addEventListener("keyup",He),ie.current&&oe.current&&rt(ie.current,oe.current,at),R.current&&R.current.focus()),function(){V&&V(),window.removeEventListener("mouseup",Ae),window.removeEventListener("keyup",He),nt()}},[G]),n.useEffect(function(){se.current=!1},[]);var He=function(r){r.key==="Escape"&&U(!1)},Ae=function(r){_.current&&_.current.contains(r.target)||U(!1)},it=function(r){var w=r.target.value;ee(w)},st=function(r){if(r.key==="Enter"&&k&&i){r.preventDefault(),z&&(D(h(h([],m,!0),z,!0)),Le(h(h([],P,!0),z,!0))),z||D(h(h([],m,!0),[K.find(function(F){return String(F.label).toLowerCase()===k.toLowerCase()})],!1)),ee(""),R.current&&(R.current.value="");return}if(!(k.length>0)&&(r.key==="Backspace"||r.key==="Delete")){var w=m.filter(function(F){return!F.disabled}).pop();w&&D(m.filter(function(F){return F.value!==w.value}))}},De=function(r){if(!N){D([r]),U(!1),ee(""),R.current&&(R.current.value="");return}r.custom&&!P.some(function(w){return w.value===r.value})&&Le(h(h([],P,!0),[r],!1)),(b||r.custom)&&(ee(""),R.current&&(R.current.value="",R.current.focus())),m.some(function(w){return w.value===r.value})?D(m.filter(function(w){return w.value!==r.value})):D(h(h([],m,!0),[r],!1))},ct=function(){D(Ke(h(h([],te.filter(function(r){return!r.disabled}),!0),P,!0),m))},ut=function(){D(m.filter(function(r){return r.disabled}))};return o.createElement(Be,{describedby:tt["aria-describedby"],feedback:v,feedbackInvalid:S,feedbackValid:x,id:L,invalid:f,label:g,text:$e,tooltipFeedback:Xe,valid:ke},o.createElement(me,{id:L,multiple:N,options:m,required:H,value:N?m.map(function(r){return r.value.toString()}):m.map(function(r){return r.value})[0],onChange:function(){return T&&T(m)},ref:ae}),o.createElement("div",{className:B("form-multi-select",(l={},l["form-multi-select-".concat(Te)]=Te,l.disabled=d,l["is-invalid"]=f,l["is-valid"]=ke,l.show=G,l),c),"aria-expanded":G,id:L,ref:lt},o.createElement("div",{className:"form-multi-select-input-group",onClick:function(){return U(!0)},ref:ie},o.createElement(he,{multiple:N,onRemove:function(r){return!d&&De(r)},placeholder:Z,search:A,selected:m,selectionType:ne,selectionTypeCounterText:Ce},A&&o.createElement("input",J({type:"text",className:"form-multi-select-search",disabled:d,autoComplete:"off",onChange:it,onKeyDown:st},m.length===0&&{placeholder:Z},m.length>0&&ne==="counter"&&{placeholder:"".concat(m.length," ").concat(Ce)},m.length>0&&!N&&{placeholder:m.map(function(r){return r.label})[0]},N&&m.length>0&&ne!=="counter"&&{size:k.length+2},{ref:R}))),o.createElement("div",{className:"form-multi-select-buttons"},!d&&u&&m.length>0&&o.createElement("button",{type:"button",className:"form-multi-select-cleaner",onClick:function(){return ut()}}),o.createElement("button",{type:"button",className:"form-multi-select-indicator",onClick:function(r){r.preventDefault(),r.stopPropagation(),U(!G)}}))),o.createElement("div",{className:"form-multi-select-dropdown",role:"menu",ref:oe},N&&Qe&&o.createElement("button",{type:"button",className:"form-multi-select-all",onClick:function(){return ct()}},We),o.createElement(ve,{handleOptionOnClick:function(r){return!d&&De(r)},loading:C,options:K.length===0&&i?z||[]:K,optionsMaxHeight:Q,optionsStyle:le,optionsTemplate:$,optionsGroupsTemplate:re,searchNoResultsLabel:Ye,selected:m,virtualScroller:Ze,visibleItems:et}))))});I.propTypes=J({className:t.string,cleaner:t.bool,clearSearchOnSelect:t.bool,disabled:t.bool,loading:t.bool,multiple:t.bool,onChange:t.func,onFilterChange:t.func,onHide:t.func,onShow:t.func,options:t.array.isRequired,optionsMaxHeight:t.oneOfType([t.number,t.string]),optionsStyle:t.oneOf(["checkbox","text"]),optionsTemplate:t.func,optionsGroupsTemplate:t.func,placeholder:t.string,required:t.bool,search:t.oneOfType([t.bool,t.oneOf(["external"])]),searchNoResultsLabel:t.oneOfType([t.string,t.node]),selectAll:t.bool,selectAllLabel:t.oneOfType([t.string,t.node]),selectionType:t.oneOf(["counter","tags","text"]),selectionTypeCounterText:t.string,size:t.oneOf(["sm","lg"]),virtualScroller:t.bool,visible:t.bool,visibleItems:t.number},Be.propTypes);I.displayName="CMultiSelect";const Nt=()=>{const e=[{value:0,label:"Angular"},{value:1,label:"Bootstrap"},{value:2,label:"React.js",selected:!0},{value:3,label:"Vue.js"},{label:"backend",options:[{value:4,label:"Django"},{value:5,label:"Laravel"},{value:6,label:"Node.js"}]}];return s.jsxs(fe,{children:[s.jsx(M,{xs:12,children:s.jsxs(Ve,{className:"mb-4",children:[s.jsxs(qe,{children:[s.jsx("strong",{children:"CoreUI React Multi Select"})," ",s.jsx("small",{children:"with Checkbox (Default Style)"})]}),s.jsx(Pe,{children:s.jsx(Fe,{href:"forms/multi-select",children:s.jsxs(fe,{children:[s.jsx(M,{md:3,children:s.jsx(I,{options:e,multiple:!1})}),s.jsx(M,{md:3,children:s.jsx(I,{options:e,selectionType:"text"})}),s.jsx(M,{md:3,children:s.jsx(I,{options:e,selectionType:"tags"})}),s.jsx(M,{md:3,children:s.jsx(I,{options:e,selectionType:"counter"})})]})})})]})}),s.jsx(M,{xs:12,children:s.jsxs(Ve,{className:"mb-4",children:[s.jsxs(qe,{children:[s.jsx("strong",{children:"CoreUI React Multi Select"})," ",s.jsx("small",{children:"with Text"})]}),s.jsx(Pe,{children:s.jsx(Fe,{href:"forms/multi-select",children:s.jsxs(fe,{children:[s.jsx(M,{md:3,children:s.jsx(I,{options:e,optionsStyle:"text",multiple:!1})}),s.jsx(M,{md:3,children:s.jsx(I,{options:e,optionsStyle:"text",selectionType:"text"})}),s.jsx(M,{md:3,children:s.jsx(I,{options:e,optionsStyle:"text",selectionType:"tags"})}),s.jsx(M,{md:3,children:s.jsx(I,{options:e,optionsStyle:"text",selectionType:"counter"})})]})})})]})})]})};export{Nt as default};
