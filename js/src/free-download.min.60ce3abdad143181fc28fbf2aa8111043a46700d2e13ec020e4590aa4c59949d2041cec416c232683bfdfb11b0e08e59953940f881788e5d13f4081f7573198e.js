const getParameterByName=(e,t=window.location.href)=>{e=e.replace(/[[\]]/g,"\\$&");var s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=s.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},downloadURI=e=>{const t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),delete t},countDown=(e,t,n)=>{const s=setInterval(()=>{e.innerHTML=t,t--||clearInterval(s)},1e3);setTimeout(()=>{downloadURI(n)},t*1e3)},counterElement=document.getElementById("counter"),messageElement=document.getElementById("message"),download=()=>{const t=getParameterByName("e"),n=getParameterByName("h"),e=new XMLHttpRequest;e.open("POST","https://api.coreui.io/free/download.php",!0),e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE){const t=e.status;if(t===0||t>=200&&t<400){const t=JSON.parse(e.responseText);t.status==="ok"?countDown(counterElement,20,t.url):createAlert(messageElement,"danger",t.message)}else createAlert(messageElement,"danger","Something went wrong, please try one more time")}},e.send(JSON.stringify({email:t,hash:n}))};window.onload=()=>{download()};const createAlert=(e,t,n)=>{Array.from(e.getElementsByClassName("alert")).forEach(e=>e.remove());const s=document.createElement("div");s.classList.add("alert",`alert-${t}`),s.innerHTML=n,t==="success"&&(e.innerHTML=""),e.appendChild(s)}